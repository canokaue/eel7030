CS EQU P0.7
ORG 0H
CLR CS
MOV R0, #0H
MOV R1, #0H
SETB C
MOV P1, R1
VOLTA: MOV A, #02H
CALL DELAY
CALL LED
JMP VOLTA
; Sub-rotina 1 - inserção de atraso
DELAY: DJNZ ACC, DELAY
RET
; Sub-rotina 2 - acende/apaga LEDs
LED: MOV A, R0
JNZ APAGA
MOV A, R1
SETB C
RLC A
JNC RETRN
MOV A, #7FH
CLR C
MOV R0, #1H
JMP RETRN
APAGA: MOV A, R1
CLR C
RRC A
JC RETRN
MOV R0, #0H
MOV A, #01H
RETRN: MOV P1, A
MOV R1, A
RET
END
